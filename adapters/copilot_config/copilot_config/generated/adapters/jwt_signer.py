# SPDX-License-Identifier: MIT
# Copyright (c) 2025 Copilot-for-Consensus contributors

"""Generated typed configuration for jwt_signer adapter.

DO NOT EDIT THIS FILE MANUALLY.
This file is auto-generated from JSON schemas by scripts/generate_typed_configs.py.
"""

from dataclasses import dataclass
from typing import Literal


@dataclass
class DriverConfig_JwtSigner_Keyvault:
    """Configuration for jwt_signer adapter using keyvault driver."""

    key_name: str
    # Name of the key in Azure Key Vault
    key_vault_url: str
    # Azure Key Vault URL (e.g., https://myvault.vault.azure.net/)
    algorithm: str = "RS256"
    # JWT signing algorithm (HMAC not supported with Key Vault)
    circuit_breaker_threshold: int = 5
    # Number of consecutive failures before opening circuit breaker
    circuit_breaker_timeout: float = 60.0
    # Seconds to wait before attempting half-open state
    client_id: str | None = None
    # Azure client ID (optional; managed identity may be used)
    client_secret: str | None = None
    # Azure client secret (optional; managed identity may be used)
    key_id: str = "default"
    # Key identifier for key rotation support
    key_version: str | None = None
    # Specific key version (optional, uses latest if not specified)
    max_retries: int = 3
    # Maximum number of retry attempts for transient errors
    retry_delay: float = 0.5
    # Initial retry delay in seconds (uses exponential backoff)
    tenant_id: str | None = None
    # Azure tenant ID (optional; managed identity may be used)


@dataclass
class DriverConfig_JwtSigner_Local:
    """Configuration for jwt_signer adapter using local driver."""

    algorithm: str = "RS256"
    # JWT signing algorithm
    key_id: str = "default"
    # Key identifier for key rotation support
    private_key: str | None = None
    # RSA/EC private key content (PEM format, required for RSA/EC algorithms)
    public_key: str | None = None
    # RSA/EC public key content (PEM format, required for RSA/EC algorithms)
    secret_key: str | None = None
    # HMAC secret key (required for HS256/HS384/HS512 algorithms)


@dataclass
class AdapterConfig_JwtSigner:
    """Configuration for jwt_signer adapter."""

    signer_type: Literal["keyvault", "local"]
    driver: DriverConfig_JwtSigner_Keyvault | DriverConfig_JwtSigner_Local
