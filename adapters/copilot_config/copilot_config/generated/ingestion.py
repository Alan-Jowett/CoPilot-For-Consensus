# SPDX-License-Identifier: MIT
# Copyright (c) 2025 Copilot-for-Consensus contributors

"""Generated typed configuration for ingestion service.

DO NOT EDIT THIS FILE MANUALLY.
This file is auto-generated from JSON schemas by scripts/generate_typed_configs.py.
"""

from dataclasses import dataclass
from typing import Any, Literal


@dataclass
class DriverConfig_ArchiveStore_Azureblob:
    """Configuration for archive_store adapter using azureblob driver."""
    azureblob_account_name: str
    """Azure Storage account name"""
    azureblob_account_key: str | None = None
    # Azure Storage account key (alternative to managed identity)
    azureblob_container_name: str | None = 'archives'
    # Azure Blob Storage container name for archives


@dataclass
class DriverConfig_ArchiveStore_Local:
    """Configuration for archive_store adapter using local driver."""
    archive_base_path: str | None = '/data/raw_archives'
    """Base path for archive storage on local filesystem"""


@dataclass
class AdapterConfig_ArchiveStore:
    """Configuration for archive_store adapter."""
    archive_store_type: Literal["azureblob", "local"]
    driver: DriverConfig_ArchiveStore_Azureblob | DriverConfig_ArchiveStore_Local


@dataclass
class DriverConfig_DocumentStore_AzureCosmosdb:
    """Configuration for document_store adapter using azure_cosmosdb driver."""
    container: str | None = 'documents'
    """Cosmos DB container name"""
    database: str | None = 'copilot'
    # Cosmos DB database name
    endpoint: str | None = None
    # Cosmos DB endpoint URL (e.g., https://myaccount.documents.azure.com:443/)
    key: str | None = None
    # Cosmos DB account key (optional if using managed identity)
    partition_key: str | None = '/collection'
    # Cosmos DB partition key path


@dataclass
class DriverConfig_DocumentStore_Inmemory:
    """Configuration for document_store adapter using inmemory driver."""
    pass


@dataclass
class DriverConfig_DocumentStore_Mongodb:
    """Configuration for document_store adapter using mongodb driver."""
    database: str | None = 'copilot'
    """MongoDB database name"""
    host: str | None = 'documentdb'
    # MongoDB hostname
    password: str | None = None
    # MongoDB password
    port: int | None = 27017
    # MongoDB port
    username: str | None = None
    # MongoDB username


@dataclass
class AdapterConfig_DocumentStore:
    """Configuration for document_store adapter."""
    doc_store_type: Literal["azure_cosmosdb", "inmemory", "mongodb"]
    driver: (
        DriverConfig_DocumentStore_AzureCosmosdb |
        DriverConfig_DocumentStore_Inmemory |
        DriverConfig_DocumentStore_Mongodb
    )


@dataclass
class DriverConfig_ErrorReporter_Console:
    """Configuration for error_reporter adapter using console driver."""
    logger_name: str | None = None
    """Logger name used by the console reporter (defaults to service logger)"""


@dataclass
class DriverConfig_ErrorReporter_Sentry:
    """Configuration for error_reporter adapter using sentry driver."""
    dsn: str | None = None
    """Sentry DSN for reporting errors"""
    environment: str | None = 'production'
    # Environment name to tag Sentry events


@dataclass
class DriverConfig_ErrorReporter_Silent:
    """Configuration for error_reporter adapter using silent driver."""
    pass


@dataclass
class AdapterConfig_ErrorReporter:
    """Configuration for error_reporter adapter."""
    error_reporter_type: Literal["console", "sentry", "silent"]
    driver: DriverConfig_ErrorReporter_Console | DriverConfig_ErrorReporter_Sentry | DriverConfig_ErrorReporter_Silent


@dataclass
class DriverConfig_Logger_AzureMonitor:
    """Configuration for logger adapter using azure_monitor driver."""
    console_log: bool | None = False
    """Also log to console when using Azure Monitor"""
    instrumentation_key: str | None = None
    # Application Insights instrumentation key for Azure Monitor logging
    level: str | None = 'INFO'
    # Logging level
    name: str | None = 'copilot'
    # Logger name for identification


@dataclass
class DriverConfig_Logger_Silent:
    """Configuration for logger adapter using silent driver."""
    level: str | None = 'INFO'
    """Logging level for silent logger"""
    name: str | None = None
    # Logger name (optional)


@dataclass
class DriverConfig_Logger_Stdout:
    """Configuration for logger adapter using stdout driver."""
    level: str | None = 'INFO'
    """Logging level for stdout logger"""
    name: str | None = None
    # Logger name (optional)


@dataclass
class AdapterConfig_Logger:
    """Configuration for logger adapter."""
    logger_type: Literal["azure_monitor", "silent", "stdout"]
    driver: DriverConfig_Logger_AzureMonitor | DriverConfig_Logger_Silent | DriverConfig_Logger_Stdout


@dataclass
class DriverConfig_MessageBus_AzureServiceBus:
    """Configuration for message_bus adapter using azure_service_bus driver."""
    auto_complete: bool | None = False
    """Automatically complete messages after processing"""
    connection_string: str | None = None
    # Azure Service Bus connection string (used when not using managed identity)
    max_wait_time: int | None = 5
    # Maximum time to wait for messages in seconds
    queue_name: str | None = None
    # Azure Service Bus queue name (optional)
    servicebus_fully_qualified_namespace: str | None = None
    # Azure Service Bus fully qualified namespace
    servicebus_use_managed_identity: bool | None = False
    # Use managed identity for Service Bus access
    subscription_name: str | None = None
    # Azure Service Bus subscription name (optional, required if topic_name is set)
    topic_name: str | None = None
    # Azure Service Bus topic name (optional)


@dataclass
class DriverConfig_MessageBus_Noop:
    """Configuration for message_bus adapter using noop driver."""
    pass


@dataclass
class DriverConfig_MessageBus_Rabbitmq:
    """Configuration for message_bus adapter using rabbitmq driver."""
    auto_ack: bool | None = False
    """Automatically acknowledge messages after processing"""
    exchange: str | None = 'copilot.events'
    # RabbitMQ exchange name for publishing
    exchange_name: str | None = 'copilot.events'
    # RabbitMQ exchange name for subscribing
    exchange_type: str | None = 'topic'
    # RabbitMQ exchange type
    queue_durable: bool | None = True
    # Whether the queue survives broker restart
    queue_name: str | None = None
    # RabbitMQ queue name (optional for subscribers)
    rabbitmq_host: str | None = 'messagebus'
    # RabbitMQ hostname
    rabbitmq_password: str | None = None
    # RabbitMQ password
    rabbitmq_port: int | None = 5672
    # RabbitMQ port
    rabbitmq_username: str | None = None
    # RabbitMQ username


@dataclass
class AdapterConfig_MessageBus:
    """Configuration for message_bus adapter."""
    message_bus_type: Literal["azure_service_bus", "noop", "rabbitmq"]
    driver: DriverConfig_MessageBus_AzureServiceBus | DriverConfig_MessageBus_Noop | DriverConfig_MessageBus_Rabbitmq


@dataclass
class DriverConfig_Metrics_AzureMonitor:
    """Configuration for metrics adapter using azure_monitor driver."""
    azure_monitor_instrumentation_key: str | None = None
    """Application Insights instrumentation key"""
    connection_string: str | None = None
    # Azure Monitor connection string (e.g., InstrumentationKey=... or Connection string)
    export_interval_millis: int | None = 60000
    # Export interval in milliseconds
    namespace: str | None = 'copilot'
    # Namespace prefix for all metrics
    raise_on_error: bool | None = False
    # Whether to raise exceptions on metric errors


@dataclass
class DriverConfig_Metrics_Noop:
    """Configuration for metrics adapter using noop driver."""
    pass


@dataclass
class DriverConfig_Metrics_Prometheus:
    """Configuration for metrics adapter using prometheus driver."""
    namespace: str | None = 'copilot'
    """Namespace prefix for all metrics"""
    raise_on_error: bool | None = False
    # Whether to raise exceptions on metric errors
    registry: dict[str, Any] | None = None
    # Optional Prometheus registry instance


@dataclass
class DriverConfig_Metrics_Pushgateway:
    """Configuration for metrics adapter using pushgateway driver."""
    gateway: str
    """Pushgateway address (e.g., pushgateway:9091 or http://pushgateway:9091)"""
    grouping_key: dict[str, Any] | None = None
    # Optional grouping key dictionary for metric grouping
    job: str | None = None
    # Prometheus job name for this service (can be set programmatically)
    namespace: str | None = 'copilot'
    # Metric namespace prefix
    raise_on_error: bool | None = False
    # Whether to raise on metric collection errors


@dataclass
class AdapterConfig_Metrics:
    """Configuration for metrics adapter."""
    metrics_type: Literal["azure_monitor", "noop", "prometheus", "pushgateway"]
    driver: (
        DriverConfig_Metrics_AzureMonitor |
        DriverConfig_Metrics_Noop |
        DriverConfig_Metrics_Prometheus |
        DriverConfig_Metrics_Pushgateway
    )


@dataclass
class DriverConfig_SecretProvider_AzureKeyVault:
    """Configuration for secret_provider adapter using azure_key_vault driver."""
    client_id: str | None = None
    """Azure client ID (optional; managed identity may be used)"""
    client_secret: str | None = None
    # Azure client secret (optional; managed identity may be used)
    tenant_id: str | None = None
    # Azure tenant ID (optional; managed identity may be used)
    vault_name: str | None = None
    # Azure Key Vault name (optional when vault_url is provided)
    vault_url: str | None = None
    # Azure Key Vault URL (e.g., https://my-vault.vault.azure.net/)


@dataclass
class DriverConfig_SecretProvider_Local:
    """Configuration for secret_provider adapter using local driver."""
    base_path: str | None = '/run/secrets'
    """Base path for secret storage"""


@dataclass
class AdapterConfig_SecretProvider:
    """Configuration for secret_provider adapter."""
    secret_provider_type: Literal["azure_key_vault", "local"]
    driver: DriverConfig_SecretProvider_AzureKeyVault | DriverConfig_SecretProvider_Local


@dataclass
class ServiceSettings_Ingestion:
    """Service-specific settings for ingestion."""
    archive_store_type: str | None = 'local'
    auth_service_url: str | None = 'http://auth:8090'
    batch_size: int | None = 100
    concurrent_sources: int | None = 5
    enable_incremental: bool | None = True
    http_host: str | None = '0.0.0.0'
    http_port: int | None = 8000
    jwt_auth_enabled: bool | None = True
    max_retries: int | None = 3
    poll_interval_seconds: int | None = 3600
    request_timeout_seconds: int | None = 60
    schedule_interval_seconds: int | None = 21600
    service_audience: str | None = 'copilot-for-consensus'
    storage_path: str | None = '/tmp/ingestion'


@dataclass
class ServiceConfig_Ingestion:
    """Top-level configuration for ingestion service."""
    service_settings: ServiceSettings_Ingestion
    archive_store: AdapterConfig_ArchiveStore | None = None
    document_store: AdapterConfig_DocumentStore | None = None
    error_reporter: AdapterConfig_ErrorReporter | None = None
    logger: AdapterConfig_Logger | None = None
    message_bus: AdapterConfig_MessageBus | None = None
    metrics: AdapterConfig_Metrics | None = None
    secret_provider: AdapterConfig_SecretProvider | None = None
