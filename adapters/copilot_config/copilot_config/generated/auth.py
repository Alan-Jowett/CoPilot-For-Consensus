# SPDX-License-Identifier: MIT
# Copyright (c) 2025 Copilot-for-Consensus contributors

"""Generated typed configuration for auth service.

DO NOT EDIT THIS FILE MANUALLY.
This file is auto-generated from JSON schemas by scripts/generate_typed_configs.py.
"""

from dataclasses import dataclass
from typing import Any, Literal


@dataclass
class DriverConfig_DocumentStore_AzureCosmosdb:
    """Configuration for document_store adapter using azure_cosmosdb driver."""
    container: str | None = 'documents'
    """Cosmos DB container name"""
    database: str | None = 'copilot'
    # Cosmos DB database name
    endpoint: str | None = None
    # Cosmos DB endpoint URL (e.g., https://myaccount.documents.azure.com:443/)
    key: str | None = None
    # Cosmos DB account key (optional if using managed identity)
    partition_key: str | None = '/collection'
    # Cosmos DB partition key path


@dataclass
class DriverConfig_DocumentStore_Inmemory:
    """Configuration for document_store adapter using inmemory driver."""
    pass


@dataclass
class DriverConfig_DocumentStore_Mongodb:
    """Configuration for document_store adapter using mongodb driver."""
    database: str | None = 'copilot'
    """MongoDB database name"""
    host: str | None = 'documentdb'
    # MongoDB hostname
    password: str | None = None
    # MongoDB password
    port: int | None = 27017
    # MongoDB port
    username: str | None = None
    # MongoDB username


@dataclass
class AdapterConfig_DocumentStore:
    """Configuration for document_store adapter."""
    doc_store_type: Literal["azure_cosmosdb", "inmemory", "mongodb"]
    driver: (
        DriverConfig_DocumentStore_AzureCosmosdb |
        DriverConfig_DocumentStore_Inmemory |
        DriverConfig_DocumentStore_Mongodb
    )


@dataclass
class DriverConfig_Logger_AzureMonitor:
    """Configuration for logger adapter using azure_monitor driver."""
    console_log: bool | None = False
    """Also log to console when using Azure Monitor"""
    instrumentation_key: str | None = None
    # Application Insights instrumentation key for Azure Monitor logging
    level: str | None = 'INFO'
    # Logging level
    name: str | None = 'copilot'
    # Logger name for identification


@dataclass
class DriverConfig_Logger_Silent:
    """Configuration for logger adapter using silent driver."""
    level: str | None = 'INFO'
    """Logging level for silent logger"""
    name: str | None = None
    # Logger name (optional)


@dataclass
class DriverConfig_Logger_Stdout:
    """Configuration for logger adapter using stdout driver."""
    level: str | None = 'INFO'
    """Logging level for stdout logger"""
    name: str | None = None
    # Logger name (optional)


@dataclass
class AdapterConfig_Logger:
    """Configuration for logger adapter."""
    logger_type: Literal["azure_monitor", "silent", "stdout"]
    driver: DriverConfig_Logger_AzureMonitor | DriverConfig_Logger_Silent | DriverConfig_Logger_Stdout


@dataclass
class DriverConfig_Metrics_AzureMonitor:
    """Configuration for metrics adapter using azure_monitor driver."""
    azure_monitor_instrumentation_key: str | None = None
    """Application Insights instrumentation key"""
    connection_string: str | None = None
    # Azure Monitor connection string (e.g., InstrumentationKey=... or Connection string)
    export_interval_millis: int | None = 60000
    # Export interval in milliseconds
    namespace: str | None = 'copilot'
    # Namespace prefix for all metrics
    raise_on_error: bool | None = False
    # Whether to raise exceptions on metric errors


@dataclass
class DriverConfig_Metrics_Noop:
    """Configuration for metrics adapter using noop driver."""
    pass


@dataclass
class DriverConfig_Metrics_Prometheus:
    """Configuration for metrics adapter using prometheus driver."""
    namespace: str | None = 'copilot'
    """Namespace prefix for all metrics"""
    raise_on_error: bool | None = False
    # Whether to raise exceptions on metric errors
    registry: dict[str, Any] | None = None
    # Optional Prometheus registry instance


@dataclass
class DriverConfig_Metrics_Pushgateway:
    """Configuration for metrics adapter using pushgateway driver."""
    gateway: str
    """Pushgateway address (e.g., pushgateway:9091 or http://pushgateway:9091)"""
    grouping_key: dict[str, Any] | None = None
    # Optional grouping key dictionary for metric grouping
    job: str | None = None
    # Prometheus job name for this service (can be set programmatically)
    namespace: str | None = 'copilot'
    # Metric namespace prefix
    raise_on_error: bool | None = False
    # Whether to raise on metric collection errors


@dataclass
class AdapterConfig_Metrics:
    """Configuration for metrics adapter."""
    metrics_type: Literal["azure_monitor", "noop", "prometheus", "pushgateway"]
    driver: (
        DriverConfig_Metrics_AzureMonitor |
        DriverConfig_Metrics_Noop |
        DriverConfig_Metrics_Prometheus |
        DriverConfig_Metrics_Pushgateway
    )


@dataclass
class DriverConfig_SecretProvider_AzureKeyVault:
    """Configuration for secret_provider adapter using azure_key_vault driver."""
    client_id: str | None = None
    """Azure client ID (optional; managed identity may be used)"""
    client_secret: str | None = None
    # Azure client secret (optional; managed identity may be used)
    tenant_id: str | None = None
    # Azure tenant ID (optional; managed identity may be used)
    vault_name: str | None = None
    # Azure Key Vault name (optional when vault_url is provided)
    vault_url: str | None = None
    # Azure Key Vault URL (e.g., https://my-vault.vault.azure.net/)


@dataclass
class DriverConfig_SecretProvider_Local:
    """Configuration for secret_provider adapter using local driver."""
    base_path: str | None = '/run/secrets'
    """Base path for secret storage"""


@dataclass
class AdapterConfig_SecretProvider:
    """Configuration for secret_provider adapter."""
    secret_provider_type: Literal["azure_key_vault", "local"]
    driver: DriverConfig_SecretProvider_AzureKeyVault | DriverConfig_SecretProvider_Local


@dataclass
class ServiceSettings_Auth:
    """Service-specific settings for auth."""
    audiences: str | None = 'copilot-for-consensus'
    auto_approve_enabled: bool | None = False
    auto_approve_roles: str | None = None
    cookie_secure: bool | None = False
    enable_dpop: bool | None = False
    first_user_auto_promotion_enabled: bool | None = False
    host: str | None = '0.0.0.0'
    issuer: str | None = 'http://localhost:8090'
    jwt_algorithm: str | None = 'RS256'
    jwt_default_expiry: int | None = 1800
    jwt_key_id: str | None = 'default'
    jwt_private_key: str | None = None
    jwt_public_key: str | None = None
    jwt_secret_key: str | None = None
    max_skew_seconds: int | None = 90
    port: int | None = 8090
    require_nonce: bool | None = True
    require_pkce: bool | None = True
    role_store_collection: str | None = 'user_roles'
    role_store_schema_dir: str | None = None


@dataclass
class ServiceConfig_Auth:
    """Top-level configuration for auth service."""
    service_settings: ServiceSettings_Auth
    document_store: AdapterConfig_DocumentStore | None = None
    logger: AdapterConfig_Logger | None = None
    metrics: AdapterConfig_Metrics | None = None
    secret_provider: AdapterConfig_SecretProvider | None = None
