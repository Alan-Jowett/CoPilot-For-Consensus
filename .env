# SPDX-License-Identifier: MIT
# Copyright (c) 2025 Copilot-for-Consensus contributors

# =============================================================================
# USER-CONFIGURABLE OPTIONS (non-secret)
# Secrets now live in ./secrets and are mounted at /run/secrets
# =============================================================================

# LLM Backend Selection
# Options: 'local' (uses Ollama), 'azure', 'mock' (for testing)
LLM_BACKEND=local

# LLM Model (when using Ollama)
# Common models: mistral, llama2, neural-chat, openchat
LLM_MODEL=mistral

# Embedding Backend Selection
# Options: 'sentencetransformers' (local, offline), 'azure', 'huggingface'
EMBEDDING_BACKEND=sentencetransformers

# Metrics Backend Selection
# Options: 'noop' (local dev/testing), 'prometheus_pushgateway' (production)
METRICS_BACKEND=prometheus_pushgateway

# Consensus Detection Strategy
# Options: 'heuristic' (rule-based), 'mock' (testing), 'ml' (future ML-based)
CONSENSUS_DETECTOR_TYPE=heuristic

# =============================================================================
# AUTHENTICATION SERVICE CONFIGURATION
# =============================================================================

# Auth Service Settings
AUTH_ISSUER=http://localhost:8080/ui
AUTH_AUDIENCES=copilot-for-consensus

# JWT Configuration
JWT_ALGORITHM=RS256
JWT_KEY_ID=default
JWT_DEFAULT_EXPIRY=1800

# OIDC Provider redirect URIs (client IDs/secrets are files in ./secrets)
# GitHub OAuth
AUTH_GITHUB_REDIRECT_URI=http://localhost:8080/ui/callback

# Google OAuth
AUTH_GOOGLE_REDIRECT_URI=http://localhost:8080/ui/callback

# Microsoft Entra ID
AUTH_MS_REDIRECT_URI=http://localhost:8080/ui/callback
AUTH_MS_TENANT=common

# Security Settings
AUTH_REQUIRE_PKCE=true
AUTH_REQUIRE_NONCE=true
AUTH_MAX_SKEW_SECONDS=90
AUTH_ENABLE_DPOP=false

# =============================================================================
# API GATEWAY TLS CONFIGURATION
# =============================================================================

# Enable TLS/HTTPS on the API Gateway (port 8443)
# Requires valid TLS certificates in ./infra/nginx/certs/
# Generate test certificates: ./infra/nginx/certs/generate-certs.sh
# GATEWAY_TLS_ENABLED=false

# TLS certificate file paths (relative to ./infra/nginx/certs/)
# GATEWAY_TLS_CERT_FILE=server.crt
# GATEWAY_TLS_KEY_FILE=server.key

