{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$comment": "SPDX-License-Identifier: MIT\nCopyright (c) 2025 Copilot-for-Consensus contributors",
    "title": "Prometheus Pushgateway metrics driver settings",
    "type": "object",
    "properties": {
        "gateway": {
            "type": "string",
            "source": "env",
            "env_var": ["PUSHGATEWAY_GATEWAY", "PROMETHEUS_PUSHGATEWAY"],
            "required": true,
            "minLength": 1,
            "description": "Pushgateway address (e.g., pushgateway:9091 or http://pushgateway:9091)"
        },
        "job": {
            "type": "string",
            "source": "env",
            "env_var": "PUSHGATEWAY_JOB",
            "required": false,
            "default": "copilot",
            "minLength": 1,
            "description": "Prometheus job name for this service (can be set programmatically)"
        },
        "grouping_key": {
            "type": "object",
            "required": false,
            "description": "Optional grouping key dictionary for metric grouping"
        },
        "namespace": {
            "type": "string",
            "required": false,
            "default": "copilot",
            "minLength": 1,
            "description": "Metric namespace prefix"
        },
        "raise_on_error": {
            "type": "boolean",
            "source": "env",
            "env_var": "PUSHGATEWAY_RAISE_ON_ERROR",
            "required": false,
            "default": false,
            "description": "Whether to raise on metric collection errors"
        }
    }
}